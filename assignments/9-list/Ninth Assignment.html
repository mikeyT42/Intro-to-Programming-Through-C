<!DOCTYPE html>
<html>
  <head>

    <meta http-equiv="content-type" content="text/html; charset=UTF-8">
    <title>Ninth Assignment</title>
  </head>
  <body>
    <div dir="ltr">
      <div><font size="4"><b><u>Introduction:</u></b></font></div>
      <div><br>
      </div>
      <div>This is the final assignment for this course. It will likely
        be the most difficult. If anything, it should produce the
        coolest results. In this assignment, you will create your first
        data structure: a dynamic array; a.k.a. a list. We will make our
        first module to house this code.<br>
      </div>
      <div><br>
      </div>
      <div><b><u><font size="4">Structure:</font></u></b></div>
      <div><br>
      </div>
      <div>This data structure that we will define is called a <span
          style="font-family:monospace">list_t</span>, or a <i>list
          type</i>. It will have 3 data members: a <span
          style="font-family:monospace">size_t</span> called <span
          style="font-family:monospace">capacity</span>, a <span
          style="font-family:monospace">size_t</span> called <span
          style="font-family:monospace">length</span>, and an <span
          style="font-family:monospace">int*</span> called <span
          style="font-family:monospace">data</span>. The <span
          style="font-family:monospace">capacity</span> will hold the
        current maximum length of the array, <span
          style="font-family:monospace">data</span>: you can also think
        of it as the allocated length of the array. The <span
          style="font-family:monospace">length</span> will hold the
        current amount of data in the array.</div>
      <div><br>
      </div>
      <div><font size="4"><b><u>What are Header Files?</u></b></font></div>
      <div><br>
      </div>
      <div>We have never gone over this concept, I expect some
        questions. Header files are a location for us to define our
        data, and the functions that operate on that data. The header
        file simply holds the function and structure definitions. You
        know how at the top of our <span style="font-family:monospace">main</span>
        file we have been declaring our functions? Header files are
        where we would do this for our modules. They are separate files
        from code files that hold the implementation: our code files are
        the ones we have been using. Header files end with <span
          style="font-family:monospace">.h</span>, while implementation
        files end with <span style="font-family:monospace">.c</span>.
        Every header file has a brother implementation file.<br>
      </div>
      <div><br>
      </div>
      <div><span style="font-family:monospace"><font size="4"><b><u>list_t.h:</u></b></font></span></div>
      <div><br>
      </div>
      <div>I will provide the basics of this file as there are specific
        things about header files that I don't want to go over. Simply
        change the file extension to be <span
          style="font-family:monospace">.h</span> and not <span
          style="font-family:monospace">.h.changeme</span>.<br>
      </div>
      <div><br>
      </div>
      <div>Define a constant called <span style="font-family:monospace">GROWTH_FACTOR</span>:
        make it a pre-processor kind. Its value should be 10. This is
        not exactly the growth factor that libraries choose, but this is
        what we're going to use.</div>
      <div><br>
      </div>
      <div>Define a <span style="font-family:monospace">struct</span>
        for our <span style="font-family:monospace">list_t</span>: use
        the above definition of that <span
          style="font-family:monospace">struct</span>.</div>
      <div><br>
      </div>
      <div>We are now going to declare 5 functions. Our first function
        will be called <span style="font-family:monospace">create_list(void)</span>;
        our second will be&nbsp;<span style="font-family:monospace">destroy(list_t
          *list)</span>; our third will be <span
          style="font-family:monospace">put(list_t *list, int i)</span>;
        our fourth will be <span style="font-family:monospace">pop(list_t
          *list)</span>; and our last will be <span
          style="font-family:monospace">shrink_to_fit(list_t *list)</span>.</div>
      <div><br>
      </div>
      <div><font size="4"><b><u><span style="font-family:monospace">list_t.c</span>:</u></b></font><br>
      </div>
      <div><br>
      </div>
      <div>This file will hold the definitions of our functions that we
        declared in the header file. Include <span
          style="font-family:monospace">list_t.h</span> like this:</div>
      <div><br>
      </div>
      <div><span style="font-family:monospace">#include "list_t.h"</span><br>
      </div>
      <div><br>
      </div>
      <div>If you need any other headers, include them in our usual way
        inside of the header file <span style="font-family:monospace">list_t.h</span>.
        <span style="font-family:monospace">#include</span> statements
        for more than the corresponding header file should only be
        included in that header file.<br>
      </div>
      <div><br>
      </div>
      <div><b><u><font size="4"><span style="font-family:monospace">create_list(void)</span>:</font></u></b><br>
      </div>
      <div><br>
      </div>
      <div>This function has a single job. It will create a <span
          style="font-family:monospace">list_t</span> for us. It will
        return the address to our allocated <span
          style="font-family:monospace">list_t</span>, or <span
          style="font-family:monospace">NULL</span> if it failed to
        allocate.</div>
      <div><br>
      </div>
      <div>Allocate the <span style="font-family:monospace">list_t</span>;
        then allocate the <span style="font-family:monospace">data</span>
        in the <span style="font-family:monospace">list</span>. Give it
        the initial size of the <span style="font-family:monospace">GROWTH_FACTOR</span>.
        If all of that passes, set the <span
          style="font-family:monospace">length</span> and the <span
          style="font-family:monospace">capacity</span>. Remember what
        those mean in the previous description of the structure <span
          style="font-family:monospace">list_t</span>.</div>
      <div><br>
      </div>
      <div>In the error cases <span style="font-family:monospace">fprintf</span>
        into <span style="font-family:monospace">stderr</span>; in the
        happy path print that the list was created. Return our <span
          style="font-family:monospace">list</span>.</div>
      <div><br>
      </div>
      <div><font size="4"><b><u><span style="font-family:monospace">destroy(list_t
                *list)</span>:</u></b></font></div>
      <div><br>
      </div>
      <div>Free our <span style="font-family:monospace">list</span>:
        set everything to <span style="font-family:monospace">NULL</span>
        or zero and set <span style="font-family:monospace">list</span>
        to <span style="font-family:monospace">NULL</span>. Then, return
        <span style="font-family:monospace">list</span>, which is now
        <span style="font-family:monospace">NULL</span>, so that the caller
        can set their reference to <span style="font-family:monospace">NULL</span>.
      </div>
      <div><br>
      </div>
      <div><font size="4"><b><u><span style="font-family:monospace">pop(list_t
                *list)</span>:</u></b></font></div>
      <div><br>
      </div>
      <div>Make the argument as immutable as possible. Get the value of
        the last item in the <span style="font-family:monospace">list</span>.
        Reduce the <span style="font-family:monospace">length</span> by
        1. Return the value.</div>
      <div><br>
      </div>
      <div><font size="4"><b><u><span style="font-family:monospace">put(list_t
                *list, int i)</span>:</u></b></font></div>
      <div><br>
      </div>
      <div>Make this function's arguments as immutable as possible. This
        function will add our integer <span
          style="font-family:monospace">i</span> to our <span
          style="font-family:monospace">list</span>. This function can
        potentially reallocate the <span style="font-family:monospace">data</span>
        in our <span style="font-family:monospace">list</span> in order
        to fit our new integer <span style="font-family:monospace">i</span>.</div>
      <div><br>
      </div>
      <div>First, print the <span style="font-family:monospace">length</span>
        and <span style="font-family:monospace">capacity</span> of our
        <span style="font-family:monospace">list</span>. Then, we will
        have an <span style="font-family:monospace">if</span> statement
        for 2 cases: the first case will be the reallocation and
        insertion case; the last case will be the simple
        non-reallocation case of insertion.</div>
      <div><br>
      </div>
      <div>For the first case, check if the <span
          style="font-family:monospace">length</span> is greater than or
        equal to the <span style="font-family:monospace">capacity</span>;
        if it is, enter our if statement block for reallocation. This is
        what will be done in this block.</div>
      <div><br>
      </div>
      <div>Print that we are reallocating. Next, calculate our new array
        size; make it a <span style="font-family:monospace">size_t</span>.
        Use the <span style="font-family:monospace">GROWTH_FACTOR</span>
        to calculate this new size: make it a <span
          style="font-family:monospace">const</span> variable. Now,
        reallocate our <span style="font-family:monospace">data</span>
        using our new size. If it fails, call <span
          style="font-family:monospace">destroy</span> on our <span
          style="font-family:monospace">list</span>. Put a comment above
        the destruction saying something how we are discarding the returned
        value from <span
          style="font-family:monospace">destroy</span>. Then call <span
          style="font-family:monospace">exit(EXIT_FAILURE)</span> to
        crash the program. If we reallocated successfully, assign our
        new pointer to <span style="font-family:monospace">data</span>
        and then increase our capacity in the list by our <span
          style="font-family:monospace">GROWTH_FACTOR</span>. This is
        the end of the <span style="font-family:monospace">if</span>
        block, there is NO ELSE block: this is because every happy case
        does this next thing.</div>
      <div><br>
      </div>
      <div>For the non-reallocation path--or technically every happy
        path--increase our <span style="font-family:monospace">length</span>
        by 1 and assign the value of <span
          style="font-family:monospace">i</span> to position <span
          style="font-family:monospace">length - 1</span> in the data
        array. You could do the increase and assignment flipped around.</div>
      <div><br>
      </div>
      <div><font size="4"><b><u><span style="font-family:monospace">shrink_to_fit(list_t
                *list)</span>:</u></b></font></div>
      <div><br>
      </div>
      <div>This function will determine if we can shrink the <span
          style="font-family:monospace">data</span> array to its current
        <span style="font-family:monospace">length</span>, and then
        shrink it if it can. Make a <span style="font-family:monospace">const</span>
        variable called <span style="font-family:monospace">diff</span>
        of type <span style="font-family:monospace">size_t</span> for
        the difference between our <span style="font-family:monospace">length</span>
        and <span style="font-family:monospace">capacity</span>. Make a
        <span style="font-family:monospace">const</span> called <span
          style="font-family:monospace">can_reduce_size</span> of type <span
          style="font-family:monospace">bool</span>: assign to this
        variable the check if <span style="font-family:monospace">diff</span>
        is greater than 0. Next, print the <span
          style="font-family:monospace">diff</span>, <span
          style="font-family:monospace">can_reduce_size</span>, the <span
          style="font-family:monospace">length</span>, and the <span
          style="font-family:monospace">capacity</span>. Do this next
        explanation inside of an <span style="font-family:monospace">if</span>
        block.</div>
      <div><br>
      </div>
      <div>If we can reduce the size of the array, we can now shrink the
        array. Make a <span style="font-family:monospace">const</span>
        variable of <span style="font-family:monospace">size_t</span>
        for our new array size: calculate the new size using our <span
          style="font-family:monospace">length</span>. Print the new
        array size. Reallocate our data using our new calculated size.
        If we fail to reallocate, <span style="font-family:monospace">destroy</span>
        the <span style="font-family:monospace">list</span> and <span
          style="font-family:monospace">exit(EXIT_FAILURE)</span>. Put the same
        comment from the <span style="font-family:monospace">put</span> function
        about the discarding of the return value here as well. If we
        successfully reallocated, assign our new pointer to <span
          style="font-family:monospace">data</span>. Make our <span
          style="font-family:monospace">capacity</span> equal to our <span
          style="font-family:monospace">length</span>. Then print our <span
          style="font-family:monospace">length</span> and <span
          style="font-family:monospace">capacity</span>.</div>
      <div><br>
      </div>
      <div><b><u><font size="4"><span style="font-family:monospace">main.c</span>:</font></u></b></div>
      <div><br>
      </div>
      <div>We have now finished implementing our <span
          style="font-family:monospace">list_t</span> module. This <span
          style="font-family:monospace">main</span> function will be
        different from the rest, we will not accept any user input.
        Print a header. <span style="font-family:monospace">#include
          "list_t.h" and <span style="font-family:monospace">stdio.h</span>.&nbsp; Print a smaller
          header saying we are creating the <span
          style="font-family:monospace">list</span>. Call our <span
          style="font-family:monospace">create_list</span> function and then print
          our <span style="font-family:monospace">length</span>. If we get a <span
          style="font-family:monospace">NULL</span> pointer, return <span
          style="font-family:monospace">EXIT_FAILURE</span>.</div>
      <div><br>
      </div>
      <div>Next print a
          header that we are filling the <span
          style="font-family:monospace">list</span>. Call the <span
          style="font-family:monospace">put</span> function with our <span
          style="font-family:monospace">list</span> and an increasing number
          of integers. Go up to 9 integers. Print our <span
          style="font-family:monospace">length</span> and <span
          style="font-family:monospace">capacity</span>, then print out every
          integer in the <span style="font-family:monospace">data</span> array. Next, call <span
          style="font-family:monospace">put(list, 10)</span>. Print our <span
          style="font-family:monospace">list</span> <span
          style="font-family:monospace">length</span>, <span
          style="font-family:monospace">capacity</span> and <span
          style="font-family:monospace">data</span>. Call <span
          style="font-family:monospace">shrink_to_fit</span>.</div>
      <div><br>
      </div>
      <div>Next, print a
          header that we are going to see our first reallocation. Call <span
          style="font-family:monospace">put(list, 11)</span>. Print our <span
          style="font-family:monospace">length</span>, <span
          style="font-family:monospace">capacity</span>, and <span
          style="font-family:monospace">data</span>. Next, call <span
          style="font-family:monospace">put</span> up to <span
          style="font-family:monospace">20</span>.<br>
        </div>
      <div><br>
      </div>
      <div>
        <div>Next, print a
            header that we are going to see our second reallocation.
            Call <span style="font-family:monospace">put(list,
            21)</span>. Next, call <span
            style="font-family:monospace">put</span> up to <span
            style="font-family:monospace">30</span>.<br>
          </div>
        <div><br>
        </div>
        <div>
          <div>Next, print a
              header that we are going to see our third reallocation.
              Call <span style="font-family:monospace">put(list,
              31)</span>. Next, call <span
              style="font-family:monospace">put</span> up to <span
              style="font-family:monospace">33</span>. Next, print our <span
              style="font-family:monospace">length</span>, <span
              style="font-family:monospace">capacity</span>, and <span
              style="font-family:monospace">data</span>.</div>
          <div><br>
          </div>
          <div>Next, print a header that we are removing and shrinking
            the array. Call <span style="font-family:monospace">pop</span>
            on our list. Print each returned value. Then call <span
              style="font-family:monospace">shrink_to_fit</span>. Next, print our <span
              style="font-family:monospace">length</span>, <span
              style="font-family:monospace">capacity</span>, and <span
              style="font-family:monospace">data</span>.</div>
          <div><br>
          </div>
          <div>Print a header
              saying that we are destroying the <span
              style="font-family:monospace">list</span>. Print a before and after
              of the <span style="font-family:monospace">list</span> pointer
              so we can see it turn to <span style="font-family:monospace">NULL</span>.
              Give a salutation and return <span style="font-family:monospace">EXIT_SUCCESS</span>.<br>
            </span></div>
          <div><br>
          </div>
          <div><font size="4"><u><b>Conclusion:</b></u></font></div>
          <div><br>
          </div>
          <div>This program
              is very different than our other programs. We are
              implementing a data structure and then testing it out in
              our <span style="font-family:monospace">main</span> function. We are
              also introducing the concept of modules and a way that we
              can make a module in a simple way. It may not be the most
              robust, or professional way, but it gets the general idea
              across. I fully expect to have questions, and please reach
              out with any. This is more likely than not going to be on
              the difficult side. It is fully in your abilities: I am
              confident in that!</div>
          <div><br>
          </div>
          <div>Good luck, and
              you have 3 weeks to complete this from today,</div>
          <div>~ Michael<br>
          </div>
        </div>
      </div>
    </div>
  </body>
</html>
